# TASK.md — 로직 수정 + 비회원 접근 + Phase 3 기반

> 2026-02-09 | Smith님 피드백 반영
> "뉴스레터" = 이메일 발송 수단 (카테고리 아님)
> "최신정보" = 홍보성 콘텐츠 (type=promo)

---

## 절대 규칙
1. **작동하는 기능 건드리지 않기**
2. **Design 없이 코드 작성 금지**
3. **한국어 UI only, #F75D5D, Pretendard, Light mode**

---

## Task 1: 콘텐츠 카테고리/타입 로직 수정

**담당**: frontend-dev + backend-dev
**예상**: 1시간

**핵심 개념 정리:**
- `category` (콘텐츠 분류): education(교육), notice(공지), case_study(고객사례)
- `type` (콘텐츠 용도): info(정보공유), promo(홍보/최신정보)
- **"뉴스레터"는 카테고리가 아님** — 이메일 발송 수단
- 정보공유 탭에서 "최신정보" = type=promo인 글 필터

**Do:**
- DB: `newsletter` 카테고리 값이 있으면 → `education`으로 마이그레이션 (or 적절한 카테고리)
- 정보공유 `/posts` 탭 필터:
  - 현재: 전체 / 교육 / 고객사례 / 최신정보(=newsletter category)
  - 변경: 전체 / 교육 / 고객사례 / 최신정보(=type=promo)
- 콘텐츠 에디터 탭:
  - 현재: "정보공유용" / "최신정보용"
  - 변경: "정보공유용 본문" / "이메일용 요약"
- 콘텐츠 관리 카테고리 필터에서 "뉴스레터" 제거
- 이메일 발송 템플릿 라벨: "최신정보" → "이메일" 또는 그냥 삭제

**완료 기준:**
- [ ] 정보공유 탭 "최신정보" = type=promo 필터
- [ ] "뉴스레터" 카테고리 UI에서 사라짐
- [ ] 콘텐츠 에디터: "정보공유용 본문" / "이메일용 요약"
- [ ] DB에 newsletter 카테고리 데이터 없음

---

## Task 2: 비회원 접근 허용 (Q&A, 정보공유, 총가치각도기)

**담당**: frontend-dev
**예상**: 1시간

**핵심:**
- Q&A, 정보공유, 총가치각도기 → 비로그인도 **읽기** 가능
- 질문하기, 글쓰기 → 로그인 필요
- admin 페이지 → 로그인 + admin 역할 필요
- 대시보드, 설정 → 로그인 필요

**Do:**
- `/questions` → 비로그인 읽기 허용. "새 질문" 클릭 시 로그인 유도
- `/posts` → 비로그인 읽기 허용. "글쓰기" 클릭 시 로그인 유도
- `/posts/[id]` → 비로그인 읽기 허용
- `/notices` → 비로그인 읽기 허용
- `/protractor` → 비로그인 시 샘플 데이터 표시 (member와 동일한 잠금 오버레이)
- `/questions/[id]` → 비로그인 읽기 허용
- AccessDenied 컴포넌트: `/dashboard`, `/settings`, `/admin/*` 에만 적용
- 기존 middleware.ts나 layout.tsx의 리다이렉트 로직 수정

**완료 기준:**
- [ ] 비로그인으로 /questions 접근 → 질문 목록 보임
- [ ] 비로그인으로 /posts 접근 → 정보공유 보임
- [ ] 비로그인으로 /protractor → 샘플 데이터 + 잠금
- [ ] 비로그인으로 /dashboard → AccessDenied (로그인 유도)

---

## Task 3: 회원관리에 이메일 등록 회원(구독자) 표시

**담당**: frontend-dev + backend-dev
**예상**: 30분

**Do:**
- `/admin/members` 회원 관리에 탭 또는 필터 추가: "가입 회원" / "이메일 구독자"
- 이메일 구독자 = leads 테이블에서 source='newsletter_subscribe' 등
- 이미 구독자 관리는 `/admin/email` 구독자 탭에 있으므로, 회원관리에서는 링크 or 간단한 카운트 표시

**완료 기준:**
- [ ] 회원관리에서 이메일 등록 회원 확인 가능

---

## 완료 알림

모든 Task 완료 후:
- `npm run build` 성공 확인
- 커밋 메시지: "fix: 카테고리 로직 수정 + 비회원 접근 허용 + 회원관리 구독자"
